<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="bower_components/chartist/libdist/chartist.min.css"> 
		<script src="bower_components/chartist/libdist/chartist.min.js"></script>
		<link href='https://fonts.googleapis.com/css?family=Lato:100,700' rel='stylesheet' type='text/css'>
		<style type="text/css">

		/* START OF CHARTIST CSS */
			.ct-grids line {
				color: rgba(255,255,255,1);
			}
			.ct-labels span {
  				color: rgba(255,255,255,0.75);
			}
			.ct-chart .ct-label.ct-vertical {
				color: rgba(255,255,255,0.25);
			}
			.ct-chart .ct-label.ct-horizontal {
				font-size: 2.5vmin;
			}
			.ct-series-a .ct-bar {
				stroke: rgba(255,255,255,0.25);
				stroke-width: 15%;
				stroke-linecap: round;
			}
			.ct-series-a .ct-line {
				stroke: rgba(255,255,255,0.75);
				stroke-width: 0.4%;
			}
			.ct-series-a .ct-area {
				fill: rgba(255,255,255,0.75);
			}

			@media only screen /* iPhone 6 landscape and portrait */
				and (min-device-width : 375px) 
				and (max-device-width : 667px) { /* STYLES GO HERE */}
			@media only screen /* iPhone 6+ landscape and portrait */
				and (min-device-width : 414px) 
				and (max-device-width : 736px) { /* STYLES GO HERE */}

		/* START OF MAIN CSS */
			body {
				font-family: Lato, sans-serif;
				font-weight: 100;
				background-color: #E0E0E0;
				padding: 0;
				margin: 0;
			}
			h1 {
				font-family: Lato, sans-serif;
				font-weight: 200;
				font-size: 8vmin;
			}

			h2 {
				font-family: Lato, sans-serif;
				font-weight: 200;
				margin: 0;
				font-size: 4vmin;
			}


			select {
				border: none;
				color: white;
				background-color: rgba(255,255,255,0.0);
				float: left;
				vertical-align: bottom;

			}

			.contentDiv {
				width: 100%;
				float: left;
				padding: 0;
				margin: 0 auto;
				height: 100vh;
			}

			.timeButton {
				-webkit-appearance: none;
				font-size: 4vmin;
				width: 12vw;
				height: 12vmin;
				border: none;
				outline: none;
				color: rgba(255,255,255,0.45);
				background-color: rgba(255,255,255,0.15);
				border-radius: 20%;
				padding-top: 1%;
				padding-bottom: 1%;
				margin-left: 10.4vw;
				float: left;
			}

			.optionButtonLeft {
				-webkit-appearance: none;
				font-size: 2.5vmin;
				width: 33%;
				border-style: solid;
				border-width: 1px;
				border-right-width: 0.5px;
				border-color: rgba(255,255,255,0.55);
				border-top-left-radius: 8px;
				border-bottom-left-radius: 8px;
				outline: none;
				color: rgba(255,255,255,0.75);
				background-color: rgba(255,255,255,0.45);
				padding-top: 1%;
				padding-bottom: 1%;
				margin:0 auto;
			}

			.optionButtonRight {
				-webkit-appearance: none;
				font-size: 2.5vmin;
				width: 33%;
				border-style: solid;
				border-width: 1px;
				border-left-width: 0.5px;
				border-color: rgba(255,255,255,0.55);
				border-top-right-radius: 8px;
				border-bottom-right-radius: 8px;
				outline: none;
				color: rgba(255,255,255,0.45);
				background-color: rgba(255,255,255,0.15);
				padding-top: 1%;
				padding-bottom: 1%;
				margin:0 auto;
			}

			.optionButtonCenter {
				-webkit-appearance: none;
				font-size: 2.5vmin;
				width: 33%;
				border-style: solid;
				border-width: 1px;
				border-right-width: 0.5px;
				border-left-width: 0.5px;
				border-color: rgba(255,255,255,0.45);
				outline: none;
				color: rgba(255,255,255,0.55);
				background-color: rgba(255,255,255,0.15);
				padding-top: 1%;
				padding-bottom: 1%;
				margin:0 auto;
			}

			.buttonDiv {
				float:left;
				width:30%;
				margin-left: 1.5%;
				margin-right: 1.5%;
				text-align: center;

			}

			#mainDiv {
				background: -webkit-linear-gradient( #7E57C2 95%, #f44336);
			}
			#stepsDiv {
				background: -webkit-linear-gradient( #f44336 95%, #4CAF50);
			}
			#distDiv {
				background: -webkit-linear-gradient( #4CAF50 95%, #4CAF50);
			}

		/* rules for fade in */
			@-webkit-keyframes fadeIn {
    			0% {
        			opacity: 0;
    			}
    			100% {
       				opacity: 1;
    			}
			}

		</style>
		<title>Reach</title>
	</head>
	<body>
		<div id="wrapper">
			<div id="mainDiv" class="contentDiv" style="text-align:center;">
				<h1 style="text-align:center;color:white;margin-bottom:1%;padding:0%;animation: fadeIn 1s ease-in;">Reach</h1>
				<h2 style="text-align:center;color:white;size:50%;padding:0%;animation: fadeIn 1s ease-in;">Daily Activity Summary</h2>
				<div class="ct-chart" id="ctSummaryBar" style="margin:0 auto;width:100%;max-width:530px;max-height:60%;margin-bottom:4%;"></div>
				<div id="logicButtonsDiv" style="width:100%;">
					<div id="activityButtonDiv" class="buttonDiv">
						<button class="optionButtonLeft" id="walk" onClick="logicVariableSet.updateVariables('walk');logicVariableSet.updateSuggestion()">Walk</button><button class="optionButtonCenter" id="run" onClick="logicVariableSet.updateVariables('run');logicVariableSet.updateSuggestion()">Run</button><button class="optionButtonRight" id="exercise" onClick="logicVariableSet.updateVariables('exercise');logicVariableSet.updateSuggestion()">Exer.</button>
					</div>
					<div id="goalButtonDiv" class="buttonDiv">
						<button class="optionButtonLeft" id="step" onClick="logicVariableSet.updateVariables('step');logicVariableSet.updateSuggestion()">Steps</button><button class="optionButtonCenter" id="distance" onClick="logicVariableSet.updateVariables('distance');logicVariableSet.updateSuggestion()">Dist.</button><button class="optionButtonRight" id="calorie" onClick="logicVariableSet.updateVariables('calorie');logicVariableSet.updateSuggestion()">Cals.</button>
					</div>
					<div id="metricButtonDiv" class="buttonDiv">
						<button class="optionButtonLeft" style="width:50%;" id="minutes" onClick="logicVariableSet.updateVariables('minutes');logicVariableSet.updateSuggestion()">Minutes</button><button class="optionButtonRight" style="width:50%;" id="miles" onClick="logicVariableSet.updateVariables('miles');logicVariableSet.updateSuggestion()">Miles</button>
					</div>
				</div>
				<div id="logicLine" style="float:left;text-align:center;width:100%;margin-bottom:3vmax;margin-top:5vh;">
					<p id="returnLogic" style="font-size:5vmin;float:left;text-align:center;color:white;margin:0 auto;width:100%;animation: fadeIn 1s ease-in;">Walk for 10 minutes to reach your step goal</p>
				</div>
			</div>
			<div id="stepsDiv" class="contentDiv" style="text-align:center;">
				<h1 style="text-align:center;color:white;margin-bottom:1%;padding:0%;">Steps</h1>
				<div class="ct-chart" id="ctStepLine" style="margin:0 auto;width:100%;height:70%;margin-bottom:4%;"></div>
				<div id="stepButtons">
					<button class="timeButton" id="step30" onClick="stepButtons.updateSet('30');updateChart(stepChart30,stepLine);" style="color:rgba(255,255,255,0.75);background-color: rgba(255,255,255,0.45);">1M</button>
					<button class="timeButton" id="step90" onClick="stepButtons.updateSet('90');updateChart(stepChart90,stepLine);">3M</button>
					<button class="timeButton" id="step180" onClick="stepButtons.updateSet('180')">6M</button>
					<button class="timeButton" id="step360" onClick="stepButtons.updateSet('360')">1Y</button>
				</div>
				<div style="height:5vh;width:100vw;float:left;"></div>
			</div>
			<div id="distDiv" class="contentDiv" style="text-align:center;">
				<h1 style="text-align:center;color:white;margin-bottom:1%;padding:0%;">Distance</h1>
				<div class="ct-chart" id="ctDistLine" style="margin:0 auto;width:100%;height:70%;margin-bottom:4%;"></div>
				<div id="stepButtons">
					<button class="timeButton" id="dist30" onClick="distButtons.updateSet('30');updateChart(distChart30,distLine);" style="color:rgba(255,255,255,0.75);background-color: rgba(255,255,255,0.45);">1M</button>
					<button class="timeButton" id="dist90" onClick="distButtons.updateSet('90');updateChart(distChart90,distLine);">3M</button>
					<button class="timeButton" id="dist180" onClick="distButtons.updateSet('180')">6M</button>
					<button class="timeButton" id="dist360" onClick="distButtons.updateSet('360')">1Y</button>
				</div>
				<div style="height:5vh;width:100vw;float:left;"></div>
			</div>
		</div>
	</body>
	<script type="application/javascript">

		//screen height changing//
		var setDiv = function() {
			var screenHeight = document.body.clientHeight;
			var divArray = document.getElementsByClassName("contentDiv");
			for( var i = 0; i < divArray.length; i++) {
				divArray[i].style.height = screenHeight;
				console.log("resized " + i)
			}
			
		}
		//window.addEventListener("DOMContentLoaded", setDiv);//
		//window.addEventListener("resize", setDiv);//


		var goalType = function(total,goal,average) {
			this.total = total;
			this.goal = goal;
			this.average = average;
			this.remaining = Math.max(goal - total, 0);
		}

		var steps = new goalType(1000,5000,2500);
		var distance = new goalType(3,3,3.5);
		var calories = new goalType (2000,2500,2100);


		var logicVariables = function(initialActivity, initialMetric, InitialGoal) {
			this.activity = initialActivity;
			this.metric = initialMetric;
			this.goal = InitialGoal;
			this.updateVariables = function(updateVariable) {
				activities = ["walk","run","exercise"];
				goals = ["step","distance","calorie"];
				metrics = ["minutes","miles"];

				if( activities.indexOf(updateVariable) >= 0) {
					for(var a = 0; a < activities.length; a++) {
						var tempAct = document.getElementById(activities[a]);
						tempAct.style.backgroundColor = "rgba(255,255,255,0.15)";
						tempAct.style.color = "rgba(255,255,255,0.45)";
					}
					var newAct = document.getElementById(updateVariable);
					newAct.style.backgroundColor = "rgba(255,255,255,0.45)";
					newAct.style.color = "rgba(255,255,255,0.75)";
					this.activity = updateVariable;

				} else if( goals.indexOf(updateVariable) >= 0) {
					for(var g = 0; g < goals.length; g++) {
						var tempGoal = document.getElementById(goals[g]);
						tempGoal.style.backgroundColor = "rgba(255,255,255,0.15)";
						tempGoal.style.color = "rgba(255,255,255,0.45)";
					}
					var newGoal = document.getElementById(updateVariable);
					newGoal.style.backgroundColor = "rgba(255,255,255,0.45)";
					newGoal.style.color = "rgba(255,255,255,0.75)";
					this.goal = updateVariable;

				} else {
					for(var m = 0; m < metrics.length; m++) {
						var tempMetric = document.getElementById(metrics[m]);
						tempMetric.style.backgroundColor = "rgba(255,255,255,0.15)";
						tempMetric.style.color = "rgba(255,255,255,0.45)";
					}
					var newMetric = document.getElementById(updateVariable);
					newMetric.style.backgroundColor = "rgba(255,255,255,0.45)";
					newMetric.style.color = "rgba(255,255,255,0.75)";
					this.metric = updateVariable;
				}
			}

			this.updateSuggestion = function() {
			
				var rateArrayDict = {
					step : {
						walk : {
							miles : 2000,
							minutes : 100
						},
						run : {
							miles : 1300,
							minutes : 150
						},
						exercise : {
							miles : 0,
							minutes : 0
						}
					},
					calorie : {
						walk : {
							miles : 120,
							minutes : 5
						},
						run : {
							miles : 151.2,
							minutes : 12.6
						},
						exercise : {
							miles : 0,
							minutes : 8.3
						}
					},
					distance : {
						walk : {
							miles : 1,
							minutes : 0.042
						},
						run : {
							miles : 1,
							minutes : 0.083
						},
						exercise : {
							miles : 0,
							minutes : 0
						}
					}
				};

		        var activity = this.activity;
		        var metric = this.metric;
		        var goal = this.goal;

		        var outputFactor = rateArrayDict[goal][activity][metric];
		        var remainderVar
		        var outputVar;
		        if( goal === "step") {
		        	remainderVar = steps.remaining;
		        	outputVar = steps.remaining / outputFactor;
		        } else if( goal === "calorie") {
		        	remainderVar = calories.remaining;
		        	outputVar = calories.remaining / outputFactor;
		        } else {
		        	remainderVar = distance.remaining;
		        	outputVar = distance.remaining / outputFactor;
		        }

		        var returnLogic = document.getElementById("returnLogic");
		        if( remainderVar <= 0) {
		        	returnLogic.innerHTML = "Congratulations! You already reached your " + goal + " goal today!";
		        } else if( this.activity === "exercise" && (this.goal === "step" || this.goal === "distance" || this.metric === "miles")) {
		        	returnLogic.innerHTML = "Oops! I Don't think you can reach your " + goal + " goal that way!";
		        } else {
		        	returnLogic.innerHTML = activity.charAt(0).toUpperCase() + activity.slice(1) + " for " + outputVar.toFixed(1) + " " + metric + " to <i>reach</i>  your " + goal + " goal today!";
		    	}
		    }
		}

		logicVariableSet = new logicVariables("walk","minutes","step");

		var buttonSet = function(buttonType) {
			this.buttonType = buttonType;
			this.updateSet = function(buttonValue) {
				var buttonList = [this.buttonType + "30", this.buttonType + "90", this.buttonType + "180", this.buttonType + "360"];
				console.log(buttonList);
				for( var a = 0; a < buttonList.length; a++) {
					if( buttonList[a] === this.buttonType + buttonValue) {
						var buttonID = document.getElementById(this.buttonType + buttonValue);
						buttonID.style.backgroundColor = "rgba(255,255,255,0.45)";
						buttonID.style.color = "rgba(255,255,255,0.75)";
						//add logic to update graph//
					} else {
						var notButtonID = document.getElementById(buttonList[a]);
						notButtonID.style.backgroundColor = "rgba(255,255,255,0.15)";
						notButtonID.style.color = "rgba(255,255,255,0.45)";
					}
				}
			}
		}

		// CREATE BUTTONS // 

			var stepButtons = new buttonSet("step");
			var distButtons = new buttonSet("dist");


			var chartClass = function(chartData,chartOptions) {
				this.chartData = chartData;
				this.chartOptions = chartOptions;
			}

			var summaryChart = new chartClass (
				{
					labels : ["Steps","Distance","Calories"],
					series : [[steps.total/steps.goal,distance.total/distance.goal,calories.total/calories.goal]]
				},
				{
					onlyIntegar : false,
					showPoint : false,
					showArea : true,
					axisX : {
						showGrid : false,
						showLabel : true
					},
					axisY : {
						offset : 10,
						labelOffset: {
							x:22,
							y:0
						},
						showGrid : false,
						type: Chartist.AutoScaleAxis,
						referenceValue: 1.25,
						labelInterpolationFnc : function(value) {
							if( value === 1 || value === 0) {
								return (value*100).toFixed(0) + "%"
							}
							
						}
					}
				}
			);

		// STEP CHARTS //

			var stepChart30 = new chartClass (
				{
					labels : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
					series : [[23,22,28,23,8,20,23,23,10,13,14,15,23,12,24,32,10,23,13,19,18,26,22,34,23,34,43,23,24,22]]
				},
				{
					onlyIntegar : false,
					showPoint : false,
					showArea : false,
					fullWidth : true,
					chartPadding : 0,
					width : "100%",
					axisX : {
						showGrid : false,
						showLabel : false
					},
					axisY : {
						offset : 0,
						labelOffset: {
							x:22,
							y:0
						},
						showGrid : false,
						showLabel : false,
						type: Chartist.AutoScaleAxis					
					}
				}
			);

			var stepChart90 = new chartClass (
				{
					labels : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],
					series : [[23,22,28,23,8,20,23,23,10,13,14,15,23,12,24,32,10,23,13,19,18,26,22,34,23,34,43,23,24,22,20,19,18,15,9,20,24,26,27,26]]
				},
				{
					onlyIntegar : false,
					showPoint : false,
					showArea : false,
					fullWidth : true,
					chartPadding : 0,
					width : "100%",
					axisX : {
						showGrid : false,
						showLabel : false
					},
					axisY : {
						offset : 0,
						labelOffset: {
							x:22,
							y:0
						},
						showGrid : false,
						showLabel : false,
						type: Chartist.AutoScaleAxis					
					}
				}
			);

		// DISTANCE CHARTS //

			var distChart30 = new chartClass (
				{
					labels : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
					series : [[23,22,28,23,8,20,23,23,10,13,14,15,23,12,24,32,10,23,13,19,18,26,22,34,23,34,43,23,24,22]]
				},
				{
					onlyIntegar : false,
					showPoint : false,
					showArea : false,
					fullWidth : true,
					chartPadding : 0,
					width : "100%",
					axisX : {
						showGrid : false,
						showLabel : false
					},
					axisY : {
						offset : 0,
						labelOffset: {
							x:22,
							y:0
						},
						showGrid : false,
						showLabel : false,
						type: Chartist.AutoScaleAxis					
					}
				}
			);

			var distChart90 = new chartClass (
				{
					labels : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],
					series : [[23,22,28,23,8,20,23,23,10,13,14,15,23,12,24,32,10,23,13,19,18,26,22,34,23,34,43,23,24,22,20,19,18,15,9,20,24,26,27,26]]
				},
				{
					onlyIntegar : false,
					showPoint : false,
					showArea : false,
					fullWidth : true,
					chartPadding : 0,
					width : "100%",
					axisX : {
						showGrid : false,
						showLabel : false
					},
					axisY : {
						offset : 0,
						labelOffset: {
							x:22,
							y:0
						},
						showGrid : false,
						showLabel : false,
						type: Chartist.AutoScaleAxis					
					}
				}
			);

		// CALORIE CHARTS //


		// CREATE CHARTS //
			var summaryBar = new Chartist.Bar("#ctSummaryBar", summaryChart.chartData, summaryChart.chartOptions);
			var stepLine = new Chartist.Line("#ctStepLine", stepChart30.chartData, stepChart30.chartOptions);
			var distLine = new Chartist.Line("#ctDistLine", distChart30.chartData, distChart30.chartOptions);

			var updateChart = function(chartObject,targetChart) {
				targetChart.update(chartObject.chartData,chartObject.chartOptions,1);
			}
	</script>
</html>
